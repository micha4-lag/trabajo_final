<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Consulta RUC</title>
  <link rel="stylesheet" href="css/ruc.css">
</head>
<body>
  <div class="consulta-container">
    <h2>Consulta RUC</h2>
    <input type="text" id="ruc" placeholder="Ingrese RUC de 11 dÃ­gitos">
    <button onclick="consultarRuc()">Consultar</button>
    <div id="resultado"></div>
  </div>

  <script>
    async function consultarRuc() {
      const ruc = document.getElementById("ruc").value.trim();
      const resultado = document.getElementById("resultado");
      const token = "51432cd4594490b12de22334097e608658444c7c9d882a49385df983591c6b83"; // Reemplaza con tu token

      if (ruc.length !== 11 || isNaN(ruc)) {
        resultado.innerHTML = "<p style='color:red;'>âš ï¸ Ingrese un RUC vÃ¡lido de 11 dÃ­gitos.</p>";
        return;
      }

      resultado.innerHTML = "ğŸ” Consultando...";

      try {
        const response = await fetch("https://api.consultasperu.com/api/v1/query", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            token: token,
            type_document: "ruc",
            document_number: ruc
          })
        });

        const json = await response.json();
        console.log(json); // Para depuraciÃ³n

        if (!json.success || !json.data) {
          resultado.innerHTML = "<p style='color:red;'>âŒ RUC no encontrado o token invÃ¡lido.</p>";
          return;
        }

        const data = json.data;

        resultado.innerHTML = `
          <p><strong>ğŸ”¢ RUC:</strong> ${data.number}</p>
          <p><strong>ğŸ¢ RazÃ³n Social:</strong> ${data.name}</p>
          <p><strong>ğŸ“ DirecciÃ³n:</strong> ${data.address}</p>
          <p><strong>ğŸŒ UbicaciÃ³n:</strong> ${data.department} / ${data.province} / ${data.district}</p>
          <p><strong>ğŸ“† Fecha de inscripciÃ³n:</strong> ${data.date_registration}</p>
          <p><strong>ğŸ“Œ Estado:</strong> ${data.condition}</p>
          <p><strong>ğŸ’¼ Actividad EconÃ³mica:</strong> ${data.main_activity}</p>
        `;
      } catch (error) {
        console.error("Error en la solicitud:", error);
        resultado.innerHTML = "<p style='color:red;'>ğŸš« Error al conectar con la API.</p>";
      }
    }
  </script>
</body>
</html>
